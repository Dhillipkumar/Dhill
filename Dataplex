ğŸ“˜ Data Quality Scan in Google Cloud Dataplex
ğŸ§­ Overview
Google Cloud Dataplex provides a unified data management platform for organizing, monitoring, and governing data across BigQuery, Cloud Storage, and other GCP services.
One of the key features of Dataplex is Data Quality Scanning, which helps ensure the reliability, accuracy, and completeness of your datasets.
This document explains how to create a Data Quality Scan directly from a BigQuery table, along with an overview of profile-based recommendations and built-in rule types.
ğŸ¯ Objective
To demonstrate the process of setting up and running a Data Quality Scan in Dataplex, including:
Selecting datasets and tables from BigQuery.
Configuring general settings.
Applying profile-based recommendations and built-in rules.
Understanding various rule types such as SQL row checks, aggregate checks, and assertions.
ğŸ—ï¸ Step-by-Step Implementation
Step 1: Open the Desired Project
Go to the Google Cloud Console.
Select the desired Project ID from the top project selector.
Under the project, navigate to BigQuery.
ğŸ“¸ Screenshot: Project ID and BigQuery navigation.
Step 2: Select Dataset and Table
Under BigQuery, expand the desired dataset.
Click on the target table you want to perform the quality scan on.
The table details page will open, showing the following tabs:
Schema
Details
Preview
Table Explorer
Insights
Lineage
Data Profile
Data Quality
ğŸ“¸ Screenshot: BigQuery table details page with Data Quality tab.
Step 3: Create a Data Quality Scan
Select the Data Quality tab.
Youâ€™ll see options:
Create Data Quality Scan
View Existing Scans
Click on Create Data Quality Scan.
ğŸ“¸ Screenshot: Data Quality scan creation page.
Step 4: Enter General Details
You will be prompted to provide the general configuration details:
Display Name: A meaningful name for the scan.
Description: Brief description of the purpose of the scan.
Scan Type: Choose whether to scan:
The entire dataset, or
Incremental data (based on date/time column).
Schedule: Define if itâ€™s a one-time or recurring scan.
After filling in these details, click Continue.
ğŸ“¸ Screenshot: General details configuration screen.
Step 5: Add Rules
You will now reach the Add Rules section, where you can choose how to generate or define the rules.
There are two main options:
Profile-Based Recommendations
Built-in Rule Types
ğŸ§© Step 6: Profile-Based Recommendations
ğŸ” What It Is
Profile-based recommendations are automatically suggested rules generated by Dataplex based on profiling the selected tableâ€™s data.
It inspects columns and identifies potential rules for checks like null values, outliers, data ranges, and unique constraints.
ğŸ§  Example Recommendations
Null checks for mandatory columns.
Range checks for numeric fields (e.g., salary > 0).
Uniqueness checks for IDs.
Format checks for date or email columns.
ğŸªœ Steps
Choose Profile-Based Recommendation.
Click Choose Columns.
Select the necessary columns where rules should apply.
Dataplex will automatically generate the recommended rules along with:
Parameters
Dimensions
Rule Type
Source and Column Name
ğŸ“¸ Screenshot: Profile-based recommendation view.
Once rules are reviewed, click Continue.
ğŸ§® Step 7: Built-in Rule Types
If you want to create customized or manual checks, you can use built-in rule types provided by Dataplex.
1ï¸âƒ£ Null Check
Ensures that selected column values are not NULL.
Example: column_name IS NOT NULL
Use this rule when missing data is unacceptable for a particular field (like Customer_ID or Transaction_Date).
2ï¸âƒ£ Value Set Check
Ensures that the values in a column belong to a predefined list or enumeration.
Example: column_name IN ('Active', 'Inactive', 'Pending')
Use this for validating categorical or status fields.
3ï¸âƒ£ Regex Check
Validates the format or pattern of data using regular expressions.
Example:
Email: column_name MATCHES '[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}'
Phone: column_name MATCHES '^[0-9]{10}$'
4ï¸âƒ£ Uniqueness Check
Ensures that all values in a column are unique, with no duplicates.
Example: Unique customer IDs, account numbers, or transaction IDs.
5ï¸âƒ£ Range Check
Validates whether a columnâ€™s values fall within a numeric or date range.
Example: column_name BETWEEN 1 AND 100
Useful for numeric fields like age, price, salary, or dates that must be within valid bounds.
6ï¸âƒ£ Aggregate Statistics Check
Validates aggregated metrics such as sum, average, count, or standard deviation against expected thresholds.
Example:
Average sales > 1000
Total transactions = expected daily count
Used for validating data aggregates or summarizations.
ğŸ§  Step 8: SQL-Based Rule Types
Dataplex allows more flexibility through SQL-based rule definitions, where you can express rules in SQL syntax.
1ï¸âƒ£ SQL Row Check Rule
Used to validate conditions at the row level.
The rule is applied to each row, and it passes if the SQL condition returns TRUE.
Example:
Copy code
Sql
SELECT * FROM table WHERE salary >= 0
â†’ Ensures no negative salaries exist.
2ï¸âƒ£ SQL Aggregate Check Rule
Used for aggregate-level validations on summarized data.
The rule passes if the aggregated value meets the condition.
Example:
Copy code
Sql
SELECT COUNT(*) < 1000 FROM table
â†’ Ensures total rows are below 1000.
3ï¸âƒ£ SQL Assertion Rule
Used to define a Boolean SQL expression that must always be TRUE.
If it returns FALSE, the rule fails.
Example:
Copy code
Sql
SELECT ASSERT(SUM(amount) > 0)
â†’ Ensures the sum of amounts is always positive.
â–¶ï¸ Step 9: Running the Scan
After defining all rules:
Review the summary â€” columns, rule names, dimensions, and parameters.
If no data sink is required, keep the storage option disabled.
Click Run Scan to execute the process.
Dataplex will now run all configured rules on the table.
ğŸ“¸ Screenshot: Scan summary and Run Scan button.
ğŸ“Š Step 10: Viewing the Results
Once the scan completes:
Navigate back to the Data Quality tab.
Click View Scan Results to see:
Pass / Fail count
Rule-wise success rate
Column summary
Overall Data Quality Score
These results help you understand the dataâ€™s health and identify problematic fields.
ğŸ§¾ Step 11: Understanding the Quality Score
Dataplex calculates a Data Quality Score based on how many rules pass successfully.
A score above 90% typically indicates good data quality.
ğŸ§° Additional Notes
You can schedule periodic scans using Cloud Scheduler or Terraform.
Scan results can be exported to BigQuery or integrated with Looker Studio dashboards.
Custom rule definitions can be managed using YAML files.
